/*! Grunt minif */
!function(a){var b=function(b){this.origHtmlMargin=parseFloat(a("html").css("margin-top")),this.options=a.extend({},a.smartbanner.defaults,b);var c=navigator.standalone;if(this.options.force?this.type=this.options.force:null!=navigator.userAgent.match(/iPad|iPhone|iPod/i)?null!=navigator.userAgent.match(/Safari/i)&&(null!=navigator.userAgent.match(/CriOS/i)||window.Number(navigator.userAgent.substr(navigator.userAgent.indexOf("OS ")+3,3).replace("_","."))<6)&&(this.type="ios"):null!=navigator.userAgent.match(/Android/i)&&(this.type="android"),this.type&&!c&&!this.getCookie("sb-closed")&&!this.getCookie("sb-installed")){this.scale="auto"==this.options.scale?a(window).width()/window.screen.width:this.options.scale,this.scale<1&&(this.scale=1);var d=a("android"==this.type?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]');0!=d.length&&(this.appId=/app-id=([^\s,]+)/.exec(d.attr("content"))[1],this.title=this.options.title?this.options.title:d.data("title")||a("title").text().replace(/\s*[|\-ï¿½].*$/,""),this.author=this.options.author?this.options.author:d.data("author")||(a('meta[name="author"]').length?a('meta[name="author"]').attr("content"):window.location.hostname),this.iconUrl=d.data("icon-url"),this.price=d.data("price"),this.create(),this.show(),this.listen())}};b.prototype={constructor:b,create:function(){var b,c=this.options.url?this.options.url:("android"==this.type?"market://details?id=":"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id")+this.appId,d=this.price||this.options.price,e=d?d+" - "+("android"==this.type?this.options.inGooglePlay:this.options.inAppStore):"",f=null===this.options.iconGloss?"ios"==this.type:this.options.iconGloss;a("body").append('<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close">&times;</a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+e+'</span></div><a href="'+c+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div>"),this.options.icon?b=this.options.icon:this.iconUrl?b=this.iconUrl:a('link[rel="apple-touch-icon-precomposed"]').length>0?(b=a('link[rel="apple-touch-icon-precomposed"]').attr("href"),null===this.options.iconGloss&&(f=!1)):a('link[rel="apple-touch-icon"]').length>0&&(b=a('link[rel="apple-touch-icon"]').attr("href")),b?(a("#smartbanner .sb-icon").css("background-image","url("+b+")"),f&&a("#smartbanner .sb-icon").addClass("gloss")):a("#smartbanner").addClass("no-icon"),this.bannerHeight=a("#smartbanner").outerHeight()+2,this.scale>1&&(a("#smartbanner").css("top",parseFloat(a("#smartbanner").css("top"))*this.scale).css("height",parseFloat(a("#smartbanner").css("height"))*this.scale),a("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",a(window).width()/this.scale))},listen:function(){a("#smartbanner .sb-close").on("click",a.proxy(this.close,this)),a("#smartbanner .sb-button").on("click",a.proxy(this.install,this))},show:function(b){a("#smartbanner").stop().animate({top:-parseFloat(a("#smartbanner").css("height"))},this.options.speedIn).addClass("shown"),a("html").animate({marginTop:this.origHtmlMargin+this.bannerHeight*this.scale},this.options.speedIn,"swing",b)},hide:function(b){a("#smartbanner").stop().animate({top:-1*this.bannerHeight*this.scale},this.options.speedOut).removeClass("shown"),a("html").animate({marginTop:this.origHtmlMargin},this.options.speedOut,"swing",b)},close:function(a){a.preventDefault(),this.hide(),this.setCookie("sb-closed","true",this.options.daysHidden)},install:function(){this.hide(),this.setCookie("sb-installed","true",this.options.daysReminder)},setCookie:function(a,b,c){var d=new Date;d.setDate(d.getDate()+c),b=escape(b)+(null==c?"":"; expires="+d.toUTCString()),document.cookie=a+"="+b+"; path=/;"},getCookie:function(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++)if(c=e[b].substr(0,e[b].indexOf("=")),d=e[b].substr(e[b].indexOf("=")+1),c=c.replace(/^\s+|\s+$/g,""),c==a)return unescape(d);return null},switchType:function(){var b=this;this.hide(function(){b.type="android"==b.type?"ios":"android";var c=a("android"==b.type?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr("content");b.appId=/app-id=([^\s,]+)/.exec(c)[1],a("#smartbanner").detach(),b.create(),b.show()})}},a.smartbanner=function(c){var d=a(window),e=d.data("typeahead"),f="object"==typeof c&&c;e||d.data("typeahead",e=new b(f)),"string"==typeof c&&e[c]()},a.smartbanner.defaults={title:null,author:null,price:"FREE",appStoreLanguage:"us",inAppStore:"On the App Store",inGooglePlay:"In Google Play",icon:null,iconGloss:null,button:"VIEW",url:null,scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null},a.smartbanner.Constructor=b}(window.jQuery);